!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ReactDynamicForm={},e.React)}(this,(function(e,t){"use strict";var n="default"in t?t.default:t;function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var c=n.createContext(),s={form:[],inputWrap:[],inputContent:[],contentLabel:[],content:[],clickable:[],label:[],labelErr:[],labelValid:[],hint:[],input:[]};function u(e,t){throw t.type,Error("RDForm Reducer Error")}var p={form:{display:"flex",flexDirection:"column",maxWidth:"500px"},rdWrap:{display:"flex",flexDirection:"column",marginBottom:"16px"},inputContent:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},contentLabelWrap:{flex:"1",display:"flex",flexDirection:"row",alignItems:"center",fontStyle:"italic",textTransform:"capitalize"},contentLabel:{display:"flex",flexDirection:"row"},content:{},clickable:{cursor:"pointer"},label:{display:"flex",flexDirection:"row",alignItems:"center",fontStyle:"italic",marginBottom:"4px"},labelWrap:{flex:"1",display:"flex",flexDirection:"row",alignItems:"center"},hint:{},hintP:{margin:"0",marginLeft:"4px"},input:{},textArea:{resize:"none"},question:{}};var d={rdWrap:["rd-input-wrap"],inputContent:["rd-input-content"],contentLabel:["rd-content-label"],contentLabelWrap:["rd-content-label-wrap"],content:["rd-content"],clickable:["rd-clickable"],label:["rd-label"],labelWrap:["rd-label-wrap"],labelErr:[],labelValid:[],hint:["rd-hint"],hintP:["rd-hint-p"],input:["rd-input"],spinner:["rd-spinner"],question:["rd-question"]},f="set",m="showInput",y="spinner",b="validationResult",v="resetClasses",h={type:"",id:"",name:"",label:"",hint:"",required:null,clickable:!1,btn:null,question:"",_classes:d,valid:null,err:"",validator:null,showInput:!1,spinner:!1};function j(e,t){switch(t.type){case f:return i(i({},e),t.payload);case v:return i(i({},e),{},{_classes:d});case b:var[n,r]=t.payload,l=n?"rd-valid":"rd-error";return i(i({},e),{},{_classes:i(i({},e._classes),{},{rdWrap:[...d.rdWrap,l]}),valid:n,err:r});case m:if(!t.payload){var{valid:a}=e,o=!a;return i(i({},e),{},{showInput:o})}return i(i({},e),{},{showInput:t.payload});case y:return i(i({},e),{},{spinner:t.payload});default:throw Error("Reducer error: shoudn't have happend")}}e.RDForm=function(e){var{styles:r,children:l}=e,[a,o]=t.useState(p),[d,f]=t.useReducer(u,s);return t.useEffect(()=>{if(r)try{var e={};for(var t in a)e[t]=i({},a[t]),r[t]&&(e[t]=i(i({},e[t]),r[t]));o(e)}catch(e){throw e}},[]),n.createElement("form",{style:i({},a.form),className:"rd-form"},n.createElement(c.Provider,{value:{styles:a}},l))},e.RDInput=function(e){var{styles:r}=t.useContext(c),{id:a,label:s,hint:u,err:p,valid:d,required:f,showInput:m,clickable:y,btn:b,penclick:v,_classes:h,spinner:j,question:E,validator:w}=e,x=o(e,["id","label","hint","err","valid","required","showInput","clickable","btn","penclick","_classes","spinner","question","validator"]),O=n.createElement("div",{style:i({},r.rdWrap),className:h.rdWrap.join(" ")},n.createElement("div",{style:i({},r.label),className:h.label.join(" ")},n.createElement("div",{style:i({},r.labelWrap),className:h.labelWrap.join(" ")},n.createElement("label",{htmlFor:a},s,f?n.createElement("span",null,"*"):null),n.createElement("div",{style:i({},r.hint),className:h.hint.join(" ")},p?n.createElement("p",{style:i({},r.hintP),className:h.hintP.join(" ")}," - ",p):u?n.createElement("p",{style:i({},r.hintP),className:h.hintP.join(" ")}," - ",u):null)),j?n.createElement("div",{className:h.spinner.join(" ")}):null),n.createElement("input",l({id:a},x,{style:i({},r.input),className:h.input.join(" ")}))),g=n.createElement("div",{style:i({},r.rdWrap),className:h.rdWrap.join(" ")},n.createElement("div",{style:i({},r.contentLabel),className:h.contentLabel.join(" ")},n.createElement("div",{style:i({},r.contentLabelWrap),className:h.contentLabelWrap.join(" ")},s,f?n.createElement("span",null,"*"):null),E?n.createElement("span",{style:i({},r.question),className:h.question.join(" ")}," ?",n.createElement("span",{className:"question-hide"},E)):null),n.createElement("div",{style:i({},r.inputContent),className:h.inputContent.join(" "),onClick:e=>v(e)},n.createElement("div",{style:i({},r.content),className:h.content.join(" ")},x.value),n.createElement("span",{style:i({},r.clickable),className:h.clickable.join(" "),onClick:e=>v(e)},b)));return n.createElement(n.Fragment,null,y?m?O:g:O)},e.useRDInput=function(){var e,n,[r,l]=t.useState(""),[a,o]=t.useReducer(j,h);function c(e){o({type:y,payload:e})}function s(){var{validator:e}=a;e&&(c(!0),o({type:b,payload:e(r)}),c(!1))}return t.useEffect(()=>(e=setTimeout(()=>{r&&s()},700),()=>{clearTimeout(e)}),[r]),t.useEffect(()=>(n=setTimeout(()=>{o({type:m,payload:!1})},5e3),()=>{clearTimeout(n)}),[r,a.showInput]),{set:function(e){if(!(e.type&&e.id&&e.name&&e.label))throw Error("type, id, name or label wasn't provided... make sure to pass type, unique id, unique name and label to every RDInput");e.value&&l(e.value);var[t,n]=e.validator?[!1,!0]:[!0,null],r=!1===t;o({type:f,payload:i(i({},e),{},{valid:t,required:n,showInput:r})})},getState:()=>(s(),{value:r,valid:a.valid}),clear:()=>{l(""),o({type:v})},props:i(i({},a),{},{value:r,penclick:function(e){e.preventDefault(),o({type:m,payload:!0})},onChange:e=>{l(e.target.value),o({type:v})},onBlur:()=>s()})}},Object.defineProperty(e,"__esModule",{value:!0})}));
